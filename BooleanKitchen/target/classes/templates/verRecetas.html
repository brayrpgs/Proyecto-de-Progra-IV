<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stRecetasYNoticias.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stNav.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stFooter.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stModal.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stTable.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stBtnEliminar.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stBtnEditar.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stColores_fuentes.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stPaginacion.css}">
    <link rel="stylesheet" type="text/css" th:href="@{/css/stDialog.css}">
    <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>

    <link rel="stylesheet" type="text/css" th:href="@{/css/Notificaciones/notificaciones.css}">


    <script text="text/javascript" th:src="@{/js/jsNav.js}" defer></script>
    <script text="text/javascript" th:src="@{/js/jsModalAdd.js}"></script>
    <title>Ver recetas</title>
    <style>
        a {
            text-decoration: none;

        }


        .button-add-recipe {
            border-radius: 6px;
            position: relative;
            width: 150px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            border: 1px solid #34974d;
            background-color: #3aa856;
            margin-left: 3%;
        }

        .button-add-recipe,
        .button__icon,
        .button__text {
            transition: all 0.3s;
        }

        .button-add-recipe .button__text {
            transform: translateX(30px);
            color: #fff;
            font-weight: 600;
        }

        .button-add-recipe .button__icon {
            position: absolute;
            transform: translateX(109px);
            height: 100%;
            width: 39px;
            background-color: #34974d;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .button-add-recipe .svg {
            width: 30px;
            stroke: #fff;
        }

        .button-add-recipe:hover {
            background: #34974d;
        }

        .button-add-recipe:hover .button__text {
            color: transparent;
        }

        .button-add-recipe:hover .button__icon {
            width: 148px;
            transform: translateX(0);
        }

        .button-add-recipe:active .button__icon {
            background-color: #2e8644;
        }

        .button-add-recipe:active {
            border: 1px solid #2e8644;
            transform: scale(0.9);
        }

    </style>

</head>

<body>
    <div th:replace="plantillas/nav :: nav"></div>

    <main class="main">
        <div class="container-recipe">
            <div style="width: 100%; margin-left: 6%; margin-top: 70px;">
                <button type="button" class="button-add-recipe" id="BtnNuevaReceta" onclick="abrirDialogNuevaReceta()">
                    <span class="button__text">Recetas</span>
                    <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24"
                            stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor"
                            height="24" fill="none" class="svg">
                            <line y2="19" y1="5" x2="12" x1="12"></line>
                            <line y2="12" y1="12" x2="19" x1="5"></line>
                        </svg></span>
                </button>
            </div>
            <div class="pagination-container-pageSizeOpt"
                th:if="${page != null and page.content != null and !page.content.empty}">
                <div>
                    <span>Mostrar </span>
                    <select id="pageSize" name="size" onchange="changePageSizeReceta()">
                        <option th:each="size : ${pageSizeOptions}" th:value="${size}" th:text="${size}"
                            th:selected="${page.size == size}"></option>
                    </select>
                    <span> por página</span>
                </div>
            </div>

            <a th:href="@{/c_receta/verDetallesDeReceta(id=${receta.identificador})}" th:each="receta : ${page.content}"
                th:if="${page.content != null and !page.content.empty}">
                <div class="card">
                    <div class="card-image">
                        <img th:src="@{/assets/__${receta.image}__}" alt="Imagen de una receta" />
                    </div>
                    <div class="category" th:text="${receta.category.name}"> </div>
                    <div class="heading">
                        <span th:text="${receta.name}"></span>
                        <div class="author"> Por <span class="name" th:text="${receta.user.userName}"></span></div>
                    </div>
                </div>
            </a>

            <div class="container-paginacion" style="width: 100%;">
                <div class="pagination-container">
                    <nav aria-label="Page navigation" class="page_navigation">
                        <ul class="pagination">
                            <li th:classappend="${page.first} ? 'disabled' : ''" title="Primera página">
                                <a th:href="@{'?page=0&size=' + ${page.size}} + '&buscarReceta=' + ${busquedaReceta}">
                                    <svg fill="blue" height="25px" width="25px" version="1.1" id="Layer_1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"
                                        transform="rotate(180)">
                                        <path
                                            d="M0,381.4l237.7-118.9L0,143.6V381.4z M237.7,262.5v118.9l237.7-118.9L237.7,143.6V262.5z M475.4,143.6v118.9v118.9H512 V143.6H475.4z">
                                        </path>
                                    </svg>
                                </a>
                            </li>
                            <li th:classappend="${page.first} ? 'disabled' : ''" title="Página anterior">
                                <a th:with="prevPage=${page.number - 1}"
                                    th:href="@{'?page=' + ${prevPage} + '&size=' + ${page.size}} + '&buscarReceta=' + ${busquedaReceta}">
                                    <svg fill="blue" height="25px" width="25px" version="1.1" id="XMLID_287_"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        viewBox="0 0 24 24" xml:space="preserve" transform="rotate(180)">
                                        <polygon points="6.8,23.7 5.4,22.3 15.7,12 5.4,1.7 6.8,0.3 18.5,12 "></polygon>
                                    </svg>
                                </a>
                            </li>
                            <li th:each="i : ${pageNumbers}" th:classappend="${i == page.number + 1} ? 'active' : ''">
                                <a th:with="pageNum=${i - 1}"
                                    th:href="@{'?page=' + ${pageNum} + '&size=' + ${page.size}} + '&buscarReceta=' + ${busquedaReceta}"
                                    th:text="${i}"></a>
                            </li>
                            <li th:classappend="${page.last} ? 'disabled' : ''" title="Página siguiente">
                                <a th:with="nextPage=${page.number + 1}"
                                    th:href="@{'?page=' + ${nextPage} + '&size=' + ${page.size}} + '&buscarReceta=' + ${busquedaReceta}">
                                    <svg fill="blue" height="25px" width="25px" version="1.1" id="XMLID_287_"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        viewBox="0 0 24 24" xml:space="preserve" transform="rotate(0)">
                                        <polygon points="6.8,23.7 5.4,22.3 15.7,12 5.4,1.7 6.8,0.3 18.5,12 "></polygon>
                                    </svg>
                                </a>
                            </li>
                            <li th:classappend="${page.last} ? 'disabled' : ''" title="Ultima página">
                                <a th:with="lastPage=${page.totalPages - 1}"
                                    th:href="@{'?page=' + ${lastPage} + '&size=' + ${page.size}} + '&buscarReceta=' + ${busquedaReceta}">
                                    <svg fill="blue" height="25px" width="25px" version="1.1" id="Layer_1"
                                        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                                        viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve">
                                        <path
                                            d="M0,381.4l237.7-118.9L0,143.6V381.4z M237.7,262.5v118.9l237.7-118.9L237.7,143.6V262.5z M475.4,143.6v118.9v118.9H512 V143.6H475.4z">
                                        </path>
                                    </svg>
                                </a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>


            <div th:if="${page.content == null || page.content.empty}"> No se encontraron coincidencias</div>
        </div>
    </main>

    <footer th:replace="plantillas/footer :: footer"></footer>

    <dialog th:replace="Receta/NuevaReceta :: dialog"></dialog>



    <!-- Variables de paginación -->
    <script th:inline="javascript">
        const totalElements = /*[[${page.totalElements}]]*/ 0;
        const currentPage = /*[[${page.number}]]*/ 0;
        const currentPageSize = /*[[${page.size}]]*/ 10;
        const buscar = /*[[${busquedaReceta}]]*/ "";
    </script>

    <script>
        function closeModal() {
            var modal = document.getElementById('modal-add-recipe');
            document.body.style.overflow = 'visible'; //Desbloque el scroll
            modal.close();
        }
    </script>

    <script text="text/javascript" th:src="@{/js/jsPaginacion.js}" defer></script>
    <script text="text/javascript" th:src="@{/js/Notificacion/notificacion.js}" defer></script>
    <script text="text/javascript" th:src="@{/js/jsValidacionAgregarReceta.js}" defer></script>
</body>

</html>