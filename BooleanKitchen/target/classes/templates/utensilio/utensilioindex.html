<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html>
    <head>
        <title>Modulo Utensilio</title>
        <meta charset="UTF-8">
        <script text="text/javascript" th:src="@{/js/funcionUtensilio.js}"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stPaginacion.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stBtnEditar.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stBtnEliminar.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stColores_fuentes.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stFooter.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stRecetasYNoticias.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stNav.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stModal.css}">
        <link rel="stylesheet" type="text/css" th:href="@{/css/stDialog.css}">
        <script text="text/javascript" th:src="@{/js/jsNav.js}" defer></script>
        <style>
            
            main{
                margin-bottom: 30px;
            }

            .Ceasar{
            text-align: center;
            justify-content: center;
            align-items: center;  
        }
            
            #Formulario {
            margin: 20px auto;
            max-width: 900px;
            width: 900px;
            padding: 20px;
            border-radius: 60px;
            background-color: #f9f9f9;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
            
            /* Regla CSS para dimensionar las imágenes */
            table img {
                width: 150px; /* Ancho deseado */
                height: 150px; /* Alto deseado */
            }

            /* Estilos de la tabla */
            table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 20px;
            }

            th, td {
                padding: 12px;
                text-align: left;
                border-bottom: 1px solid #ddd;
            }

            th {
                background-color: #f2f2f2;
            }

            /* Agregar espacios */
            .form-group, .form-img, .container, .link {
                margin-bottom: 20px; /* Margen inferior */
            }

            .form-group label, .form-img label {
                margin-right: 10px; /* Espacio entre etiqueta y entrada */
            }

            .form-img input[type="file"] {
                margin-top: 10px; /* Espacio entre la etiqueta y el input de archivo */
            }

            .form-group input[type="submit"] {
                margin-top: 10px; /* Espacio entre el input de envío y el grupo anterior */
            }

            .editBtn, .deleteBtn {
                margin-top: 10px; /* Espacio entre los botones de edición/eliminación y el grupo anterior */
            }
        </style>
    </head>
    <body>
        <div class="Ceasar">
        <div th:replace="plantillas/nav :: nav"></div>
        <main style="margin-top: 100px;">
            <article>
                <header>
                    <h1>Ingresa el Utensilio</h1>
                </header>
                <div id="Formulario" style="width: 100%;">


                    <form id="FormU" method="post" th:action="@{/c_utensilio/guardarUtensilio}" enctype="multipart/form-data">
                        <div class="Div1" style="flex: 1;">
                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input required type="text" class="input" id="identificador" name="identificador" autocomplete="off" th:value="${selectUtensil!=null?selectUtensil.identificador:'UTN-'}" th:readonly="${selectUtensil!=null}" oninput="agregarPrefijo(this);">
                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">I</span>
                                                <span class="label-char" style="--index: 1">d</span>
                                                <span class="label-char" style="--index: 2">e</span>
                                                <span class="label-char" style="--index: 3">n</span>
                                                <span class="label-char" style="--index: 4">t</span>
                                                <span class="label-char" style="--index: 5">i</span>
                                                <span class="label-char" style="--index: 6">f</span>
                                                <span class="label-char" style="--index: 7">i</span>
                                                <span class="label-char" style="--index: 8">c</span>
                                                <span class="label-char" style="--index: 9">a</span>
                                                <span class="label-char" style="--index: 10">d</span>
                                                <span class="label-char" style="--index: 11">o</span>
                                                <span class="label-char" style="--index: 12">r</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>


                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input type="text" id="nombre" name="nombre" autocomplete="off" class="input" required th:value="${selectUtensil!=null?selectUtensil.nombre:''}">
                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">N</span>
                                                <span class="label-char" style="--index: 1">o</span>
                                                <span class="label-char" style="--index: 2">m</span>
                                                <span class="label-char" style="--index: 3">b</span>
                                                <span class="label-char" style="--index: 4">r</span>
                                                <span class="label-char" style="--index: 5">e</span>

                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input type="text"  id="material" name="material" autocomplete="off" class="input" required th:value="${selectUtensil!=null?selectUtensil.material:''}">
                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">M</span>
                                                <span class="label-char" style="--index: 1">a</span>
                                                <span class="label-char" style="--index: 2">t</span>
                                                <span class="label-char" style="--index: 3">e</span>
                                                <span class="label-char" style="--index: 4">r</span>
                                                <span class="label-char" style="--index: 5">i</span>
                                                <span class="label-char" style="--index: 6">a</span>
                                                <span class="label-char" style="--index: 7">l</span>

                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container-elements">

                                <div class="inputs-items">
                                    <div class="wave-group">
                                        <select required="" class="select" name="categoria">
                                            <option value="" disabled selected hidden></option>
                                            <option th:if="${selectCat!=null or !selectCat.isEmpty()}" th:each="cat:${selectCat}" th:value="${cat.idSerial}" th:text="${cat.name}" th:selected="${selectUtensil != null && selectUtensil.categoria.name == cat.name}"></option>
                                        </select>
                                        <span class="bar"></span>
                                        <label class="label">
                                            <span class="label-char" style="--index: 0">C</span>
                                            <span class="label-char" style="--index: 1">a</span>
                                            <span class="label-char" style="--index: 2">t</span>
                                            <span class="label-char" style="--index: 3">e</span>
                                            <span class="label-char" style="--index: 4">g</span>
                                            <span class="label-char" style="--index: 5">o</span>
                                            <span class="label-char" style="--index: 6">r</span>
                                            <span class="label-char" style="--index: 7">i</span>
                                            <span class="label-char" style="--index: 8">a</span>
                                        </label>
                                    </div>
                                </div>
                            </div>        



                            <div class="container-elements"> 
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="container-upload-img">
                                            <input type="file" accept="image/*" name="rutaDeImagen" id="file"
                                                oninput="this.className = ''" required>
                                            <div id="imageContainer-file">
                                                <img src="/assets/uploadimg.jpg" alt="">
                                            </div>
        
                                            <div class="btnDelete-container">
                                                <button id="deleteButton" class="deleteBtn" alt="Eliminar"
                                                    onclick="deleteImage('file')">
                                                    <svg class="delete-top" viewBox="0 0 39 7" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <line y1="5" x2="39" y2="5" stroke="white" stroke-width="4"></line>
                                                        <line x1="12" y1="1.5" x2="26.0357" y2="1.5" stroke="white"
                                                            stroke-width="3"></line>
                                                    </svg>
                                                    <svg class="delete-bottom" viewBox="0 0 33 39" fill="none"
                                                        xmlns="http://www.w3.org/2000/svg">
                                                        <mask id="path-1-inside-1_8_19" fill="white">
                                                            <path
                                                                d="M0 0H33V35C33 37.2091 31.2091 39 29 39H4C1.79086 39 0 37.2091 0 35V0Z">
                                                            </path>
                                                        </mask>
                                                        <path
                                                            d="M0 0H33H0ZM37 35C37 39.4183 33.4183 43 29 43H4C-0.418278 43 -4 39.4183 -4 35H4H29H37ZM4 43C-0.418278 43 -4 39.4183 -4 35V0H4V35V43ZM37 0V35C37 39.4183 33.4183 43 29 43V35V0H37Z"
                                                            fill="white" mask="url(#path-1-inside-1_8_19)"></path>
                                                        <path d="M12 6L12 29" stroke="white" stroke-width="4"></path>
                                                        <path d="M21 6V29" stroke="white" stroke-width="4"></path>
                                                    </svg>
                                                </button>
                                            </div>
        
                                        </div>
                                    </div>
                                </div>
                            </div>  
                        </div> 

                        <div class="Div 2" style="flex: 1;">

                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input type="number" step="0.01" id="precio" name="precio" autocomplete="off" class="input" required th:value="${selectUtensil!=null?selectUtensil.precio:''}">
                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">P</span>
                                                <span class="label-char" style="--index: 1">r</span>
                                                <span class="label-char" style="--index: 2">e</span>
                                                <span class="label-char" style="--index: 3">c</span>
                                                <span class="label-char" style="--index: 4">i</span>
                                                <span class="label-char" style="--index: 5">o</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input type="number" id="cantidad" name="cantidad" autocomplete="off" class="input" required th:value="${selectUtensil!=null?selectUtensil.cantidad:''}">

                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">C</span>
                                                <span class="label-char" style="--index: 1">a</span>
                                                <span class="label-char" style="--index: 2">n</span>
                                                <span class="label-char" style="--index: 3">t</span>
                                                <span class="label-char" style="--index: 4">i</span>
                                                <span class="label-char" style="--index: 5">d</span>
                                                <span class="label-char" style="--index: 6">a</span>
                                                <span class="label-char" style="--index: 7">d</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="container-elements">
                                <div class="inputs-modal">
                                    <div class="inputs-items">
                                        <div class="form-group wave-group"> 
                                            <input type="text" id="descripcion" name="descripcion" autocomplete="off" class="input" required th:value="${selectUtensil!=null?selectUtensil.descripcion:''}">

                                            <span class="bar"></span>
                                            <label class="label">
                                                <span class="label-char" style="--index: 0">D</span>
                                                <span class="label-char" style="--index: 1">e</span>
                                                <span class="label-char" style="--index: 2">s</span>
                                                <span class="label-char" style="--index: 3">c</span>
                                                <span class="label-char" style="--index: 4">r</span>
                                                <span class="label-char" style="--index: 5">i</span>
                                                <span class="label-char" style="--index: 6">p</span>
                                                <span class="label-char" style="--index: 7">c</span>
                                                <span class="label-char" style="--index: 8">i</span>
                                                <span class="label-char" style="--index: 9">ó</span>
                                                <span class="label-char" style="--index: 10">n</span>

                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <input  th:if="${selectUtensil!=null}" type="submit" onclick="cambiarForm('/c_utensilio/updateUtensilio')" value="Actualizar"/>
                        <button th:if="${selectUtensil==null}"  type="submit">Enviar Formulario
                        </button>
                </div> 
                </form>




            </article>
            <aside style="flex: 1;">
                <div th:if="${selectUtensil==null}" class="container">
                    <h2>Lista de Utensilios</h2>
                    <div id="TablaUtensilio">

                        <th:block th:if="${#lists.isEmpty(page.content)}">
                            <p>No hay Utensilios disponibles.</p>
                        </th:block>

                        <table>
                            <th:block th:if="${not #lists.isEmpty(page.content)}">
                                <thead>
                                    <tr>
                                        <th>Identificador</th>
                                        <th>Nombre</th>
                                        <th>Material</th>
                                        <th>Categoria</th>
                                        <th>Precio</th>
                                        <th>Cantidad</th>
                                        <th>Descripción</th>
                                        <th>Imagen</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="temp : ${page.content}">
                                        <td th:text="${temp.identificador}"></td>
                                        <td th:text="${temp.nombre}"></td>
                                        <td th:text="${temp.material}"></td>
                                         <td th:text="${temp.categoria.name}"></td>
                                        <td th:text="${temp.precio}"></td>
                                        <td th:text="${temp.cantidad}"></td>
                                        <td th:text="${temp.descripcion}"></td>
                                        <td><img th:src="@{'/imgUts/'+${temp.rutaDeImagen}}" alt="alt"/></td>
                                        <td>
                                            <div style="width: 100%; display: flex; justify-content: center;">
                                                <a th:href="@{'/c_utensilio/modificarUtensilio/'+${temp.identificador}}">
                                                    <button class="editBtn" alt="Editar">
                                                        <svg height="1em" viewBox="0 0 512 512">
                                                        <path
                                                            d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1v32c0 8.8 7.2 16 16 16h32zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"
                                                            ></path>
                                                        </svg>
                                                    </button>
                                                </a>
                                                <button class="deleteBtn" alt="Eliminar" th:attr="data-identificador=${temp.identificador},url=${temp.rutaDeImagen}"
                                                        onclick="eliminarUtensilio(this)" />

                                                <svg
                                                    class="delete-top"
                                                    viewBox="0 0 39 7"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    >
                                                <line y1="5" x2="39" y2="5" stroke="white" stroke-width="4"></line>
                                                <line
                                                    x1="12"
                                                    y1="1.5"
                                                    x2="26.0357"
                                                    y2="1.5"
                                                    stroke="white"
                                                    stroke-width="3"
                                                    ></line>
                                                </svg>
                                                <svg
                                                    class="delete-bottom"
                                                    viewBox="0 0 33 39"
                                                    fill="none"
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    >
                                                <mask id="path-1-inside-1_8_19" fill="white">
                                                    <path
                                                        d="M0 0H33V35C33 37.2091 31.2091 39 29 39H4C1.79086 39 0 37.2091 0 35V0Z"
                                                        ></path>
                                                </mask>
                                                <path
                                                    d="M0 0H33H0ZM37 35C37 39.4183 33.4183 43 29 43H4C-0.418278 43 -4 39.4183 -4 35H4H29H37ZM4 43C-0.418278 43 -4 39.4183 -4 35V0H4V35V43ZM37 0V35C37 39.4183 33.4183 43 29 43V35V0H37Z"
                                                    fill="white"
                                                    mask="url(#path-1-inside-1_8_19)"
                                                    ></path>
                                                <path d="M12 6L12 29" stroke="white" stroke-width="4"></path>
                                                <path d="M21 6V29" stroke="white" stroke-width="4"></path>
                                                </svg>
                                                </button>
                                            </div>


                                        </td>
                                    </tr>
                                </tbody>
                        </table>
                        <div class="pagination-container">
                            <nav aria-label="Page navigation" class="page_navigation">
                                <ul class="pagination">
                                    <li th:classappend="${page.first} ? 'disabled' : ''" title="Primera página">
                                        <a th:href="@{'?page=0&size=' + ${page.size}}">
                                            <svg fill="blue" height="25px" width="25px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve" transform="rotate(180)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M0,381.4l237.7-118.9L0,143.6V381.4z M237.7,262.5v118.9l237.7-118.9L237.7,143.6V262.5z M475.4,143.6v118.9v118.9H512 V143.6H475.4z"></path> </g></svg>
                                        </a>
                                    </li>
                                    <li th:classappend="${page.first} ? 'disabled' : ''" title="Página anterior">
                                        <a th:with="prevPage=${page.number - 1}" th:href="@{'?page=' + ${prevPage} + '&size=' + ${page.size}}">
                                            <svg fill="blue" height="25px" width="25px" version="1.1" id="XMLID_287_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve" transform="rotate(180)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="next"> <g> <polygon points="6.8,23.7 5.4,22.3 15.7,12 5.4,1.7 6.8,0.3 18.5,12 "></polygon> </g> </g> </g></svg>
                                        </a>
                                    </li>
                                    <li th:each="i : ${pageNumbers}" th:classappend="${i == page.number + 1} ? 'active' : ''">
                                        <a th:with="pageNum=${i - 1}" th:href="@{'?page=' + ${pageNum} + '&size=' + ${page.size}}" th:text="${i}"></a>
                                    </li>
                                    <li th:classappend="${page.last} ? 'disabled' : ''" title="Página siguiente">
                                        <a th:with="nextPage=${page.number + 1}" th:href="@{'?page=' + ${nextPage} + '&size=' + ${page.size}}">
                                            <svg fill="blue" height="25px" width="25px" version="1.1" id="XMLID_287_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" xml:space="preserve" transform="rotate(0)"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="next"> <g> <polygon points="6.8,23.7 5.4,22.3 15.7,12 5.4,1.7 6.8,0.3 18.5,12 "></polygon> </g> </g> </g></svg>
                                        </a>
                                    </li>
                                    <li th:classappend="${page.last} ? 'disabled' : ''" title="Ultima página">
                                        <a th:with="lastPage=${page.totalPages - 1}" th:href="@{'?page=' + ${lastPage} + '&size=' + ${page.size}}">
                                            <svg fill="blue" height="25px" width="25px" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M0,381.4l237.7-118.9L0,143.6V381.4z M237.7,262.5v118.9l237.7-118.9L237.7,143.6V262.5z M475.4,143.6v118.9v118.9H512 V143.6H475.4z"></path> </g></svg>
                                        </a>
                                    </li>
                                </ul>
                            </nav>
                        </div>
                        </th:block>
                    </div>
                </div>
            </aside>
            <br>
            <br><br>
        </main>
        </div>
        <footer th:replace="plantillas/footer :: footer"></footer>


        <script>
            function deleteImage(id) {
                event.preventDefault();
                if (document.getElementById(id).value !== '') {
                    document.getElementById(id).value = '';
                    var imageContainer = document.getElementById('imageContainer-' + id);
                    imageContainer.innerHTML = '<img src="/assets/uploadimg.jpg" alt="Imagen">';

                    // document.getElementById('deleteButton').disabled = true;
                } else {
                    alert('Por favor selecciona una imagen.');
                }
            }


            document.getElementById('file').addEventListener('change', function (event) {
                var file = event.target.files[0];
                var imageType = /^image\//;

                if (!file || !imageType.test(file.type)) {
                    document.getElementById("file").value = '';
                    alert('Por favor selecciona una imagen válida.');
                    return;
                }

                var reader = new FileReader();

                reader.onload = function (event) {
                    var imageContainer = document.getElementById('imageContainer-file');
                    imageContainer.innerHTML = '<img src="' + event.target.result + '" alt="Imagen">';
                    document.getElementById('deleteButton').disabled = false;
                };

                reader.readAsDataURL(file);
            });
        </script>

    </body>
</html>
